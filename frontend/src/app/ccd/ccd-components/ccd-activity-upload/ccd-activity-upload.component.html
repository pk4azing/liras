<div class="modal-content bg-white border-0 rounded-4 shadow-lg p-4">
  <div class="modal-header border-0 pb-0">
    <h5 class="modal-title fw-bold text-dark fs-4">Select Files</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="onCancel()"></button>
  </div>

  <div class="modal-body pt-0 pb-3">
    <div class="mb-4">
      <input type="file" id="fileInput" accept=".csv, .pdf, .xlsx, .docx" (change)="onFileSelected($event)" multiple class="d-none">
      <label for="fileInput" (drop)="onDrop($event)" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"
        [class.border-primary]="isDragging"
        class="d-flex flex-column align-items-center justify-content-center w-100 p-5 border-2 border-dashed rounded-3 cursor-pointer bg-light text-secondary">
        <i class="bi bi-cloud-upload display-4 text-primary mb-3"></i>
        <p class="mb-2 fs-6">
          <span class="fw-bold text-primary">Click to upload</span> or drag and drop
        </p>
        <p class="small text-muted mb-0">
          Supported formats: PDF, CSV (Max 10MB each)
        </p>
      </label>
    </div>

    <div *ngIf="selectedFiles.length > 0" class="overflow-auto custom-scrollbar" style="max-height: 300px;">
      <ul class="list-group list-group-flush">
        <li *ngFor="let file of selectedFiles; let i = index"
          class="list-group-item d-flex align-items-center justify-content-between px-3 py-2 mb-2 bg-light rounded-3 border">
          <div class="d-flex align-items-center text-truncate" style="min-width: 0;">
            <i class="bi bi-file-earmark-text fs-5 text-primary me-3"></i>
            <div class="text-truncate">
              <p class="text-dark mb-0 small fw-medium text-truncate">{{ file.name }}</p>
              <p class="text-muted small mb-0">
                {{ file.size }} &bull; {{ file.type || 'Unknown type' }}
              </p>
            </div>
          </div>
          <button mat-icon-button type="button" (click)="removeFile(i); $event.stopPropagation()" class="text-danger">
            <mat-icon style="font-size: 28px; width: 28px; height: 28px;">close</mat-icon>
          </button>

        </li>
      </ul>
    </div>
  </div>

  <div class="modal-footer border-0 pt-0 d-flex justify-content-end gap-2">
    <button type="button" (click)="onCancel()" class="btn btn-lg btn-light text-dark px-4 py-2 rounded-2 fw-medium">
      Cancel
    </button>
    <button type="submit" class="btn btn-lg btn-primary px-4 py-2 rounded-2 d-flex align-items-center fw-medium"
      [disabled]="selectedFiles.length === 0" (click)="onSubmit()">
      <i class="bi bi-cloud-arrow-up-fill me-2"></i>
      Upload <span *ngIf="selectedFiles.length > 0">({{ selectedFiles.length }})</span>
    </button>
  </div>
</div>